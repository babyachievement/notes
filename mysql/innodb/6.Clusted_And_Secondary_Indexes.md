#6.聚集索引和二级索引

##6.1聚集索引

###6.1.1什么是聚簇索引
在InnoDB中，每个表都有一个聚集索引。InnoDB是如果确定聚集索引的?
* 如果在表中定义了主键，InnoDB将使用主键作为聚集索引的列;
* 如果没有定义主键，MySQL将挑选第一个"唯一索引"，这个唯一索引定义在不能有NULL值的列上，InnoDB将使用它作为聚簇索引;
* 如果以上两种都没有，InnoDB将在包含row id的列上生成一个隐藏聚簇索引;


###6.1.2聚簇索引如何优化查询？
通过聚簇索引获得一行是非常快的，能通过索引直接获得一行数据，因为聚簇索引和行数据是一起存放的。


###6.1.3聚簇索引与二级索引的关系
除了聚簇索引以外的所有其他索引都被称作二级索引，二级索引中的每一条记录包含一行数据的主键列，同时包含被定义为二级索引的列,所以二级索引每个记录要比聚簇索引的每个记录数据量小。


##6.2索引的物理存储特性

所有的InnoDB索引都是B树，索引记录存放在叶子页中，默认的每个索引页大小为16KB，当新纪录插入时，InnoDB会尝试为未来的索引记录插入和更新预留1/16的页空间。

如果索引是按照序列（升序或降序），那么索引页将是15/16的满，如果插入是乱序的，那么叶子将会是1/2到15/16的使用程度，如果一个页的填充度小于1/2，索引树将会收缩以释放页。
