#Android程序基础

Android应用由Java语言编写。Android SDK工具编译代码——与任何数据和资源文件——成一个APK：一个Android包，带有.apk的压缩包。一个APK文件包含一个Android应用的所有内容，是Android设备用来安装程序的文件。

当一个程序安装在一个Android设备上后，每个Android程序存活在其自己的安全沙箱中：

* Android操作系统是个多用户Linux系统，每个App是个不同的用户。
* 默认的，系统会给每个App赋予一个唯一的Linux用户ID(这个ID只被系统使用，对App不可见)。系统会为App中的所有文件设置权限，从而使得只有赋予给App的用户ID能够访问它们。
* 每个进程拥有它自己的虚拟机，那么一个App的代码运行在一个与其他App隔离的环境中。
* 默认地，每个App运行在它自己的Linux进程中。当App的任何组件需要执行时，Android启动进程，然后当组件不再使用或者系统必须为其他App收集内存时关闭。

通过这种方式，Android系统实现了“最小权限原则”。就是说，每个App默认只能访问它用来工作的组件，其它都不能访问。这样便创造了一个非常安全的环境，每个App不能访问无权访问的系统资源。

但是，一个App有多重方式可以与其他App共享数据和访问系统服务。

* 可以将两个App的用户ID设成相同的，这样它们就可以互相访问彼此的文件。为了节省系统资源，拥有相同用户ID的App可以运行在相同的进程中并且共享相同的虚拟机。
* 一个App可以申请权限以访问设备中数据，比如通讯录、短信、挂载的存储、相机、蓝牙等等。用户不得不明确赋予权限。


##App组件

App组件是构建一个Android App最重要的基石。每个组件是进入程序的不同的点。并不是所有的组件对于用户和相互依赖的组件是真的入口，但当拥有实体并且扮演特殊的角色时每个都在。每个组件都是一个独特的基石，它帮助定义应用的整体行为。

有四种不同的App组件。每种类型为不同的目的服务，拥有不同的生命周期。以下是这四种组件。

###1. Activies

一个activity代表一个单独的拥有用户界面的屏幕。例如，一个Email应用可能会有一个展现新email列表的activity，一个发送eamil的activity以及一个阅读email的activity。尽管这些activity在email应用中一同够成了一个整体用户体验，每个activity彼此之间都是相互独立的。比如，一个不同的引用可以从这些activity中的任何个启动（如果允许的话）。例如，一个摄像应用可以启动email应用中发送email的activity以方便用户分享图片。


###2. Services

一个服务是一个运行在后台执行长期操作或者行远程操作的组件。服务不提供用户界面。例如，一个服务可能在用户使用另一个App的时候在后台播放音乐，或者它可能通过网络获取数据而不是阻塞用户界面。其他组件，比如Activity可以启动service并让其运行或者绑定到该Activity上来与它交互。

###Content Provider

一个内容提供者管理着一个应用数据集。可以把数据存储在文件系统中，SQLIT额数据库中，Web上或者任何可访问的持久化存储位置。通过content provider，其他app可以查询或者甚至修改数据（如果content provider允许）。例如，Android系统提供一个管理用户通讯录的content provider。因此，任何拥有适当权限的app可以查询部分content provider（比如ContactsContract.Data）已读取或者写入指定人的信息。

Content provider对于读取和写入隐私数据同样有用。

一个Content Provider是一个ContentProvider的子类并且必须实现一个标准的API以使其他APP能够执行事务。

###Broadcast recivers


广播接收器是一个响应系统广播通知的组件。有许多来自系统的广播——比如，声明系统的屏幕已经关闭的广播，电池电量低，或者图片截屏。App也能产生广播——比如，让其他app知道一些数据已经下载到设备上并且可用了。尽管广播接收器并没有用户界面，它们可以创建状态栏通知以提醒用户一个广播事件发生了。更常见的，广播接收器知识其他组件的“网卡”，只做非常少的工作。举个例子，基于一个事件可以创建一个服务执行任务。

广播接收器实现需要继承BroadcastReceiver，并且没广播由Intent对象传递。


Android系统独特的一面是任何App可以启动别的App的组件。比如，如果想让用户用照相，很可能是其他App开启了摄像头，我们只管使用即可，而不是我们自己开发一个Activity捕捉照片。我们不用合作或者连接到相机程序的app。可替换的，我们可以启动相机app中照相的Activity。完成后，图片返回到我们的程序中，由我们使用。对于用户来说，就好像照相机是我们的app的一部分。


当系统启动一个组件，它会启动这个app的进程兵器初始化需要的组件的类。不像其他系统中的程序，Android app不需要一个进入点（没有类似的main（）函数）。

因为系统在不同的进程中运行app，并根据文件的曲向南限制其他app的访问，我们的app不能直接激活别的app中的组件。Android系统可以激活在另一个app中的组件，但是我们必须传递消息给系统指定intent以启动一个指定的组件。然后系统会为我们激活组件。

 [Android基础](http://developer.android.com/guide/components/fundamentals.html "Android基础")