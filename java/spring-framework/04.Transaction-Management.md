# 事务管理

Spring框架为事务管理提供了一个一致性的抽象，带有以下几大好处：
* 跨越不同事务API（如JTA，JDBC，Hibernate，JPA和Java Data Objects）的一致性编程模型
* 支持[声明式事务](http://docs.spring.io/spring/docs/current/spring-framework-reference/html/transaction.html#transaction-declarative)
* 简单的API用于可编程事务管理而不是复杂的事务管理API如JTA
* 和Spring Data访问抽象出色的集成


## 1. Spring框架事务管理支持模型的优点

传统上，Java EE开发人员有两种事务管理的选择：全局或者局部事务，两者都有比较大的限制。

### 1.1 全局事务（Global Tansactions）

全局事务可以同时与多个事务资源使用，比如关系型数据库和消息队列。使用JTA的API管理全局事务是非常麻烦的（很大一部分是因为它的异常模型）。此外，一个JTA UserTransaction正常需要源自JNDI，这就意味着为了使用JTA得用JNDI。显然全局事务的使用限制了程序代码的任何可能的重用性，因为JTA通常只在一个应用服务端环境下可用。

之前，使用全局事务的更倾向的方式是通过EJB CMT（Container Managed Transaction）：CMT是声明式事务管理的一种形式（区别于编程式事务管理）。EJB CMT删除了事务关联的JNDI查找的需要，尽管EJB自身必须使用JNDI。它删除了大部分但不是所有需要写代码控制事务的需要。一个显著的缺点是CMT绑定JTA，且是要给应用服务端环境。而且，只用使用EJB实现业务逻辑时才可用，或者至少在事务的EJB 外表之后可用。EJB的一个非常大的缺点是使用EJB管理事务并不是一个有吸引力的选择，特别是当面对声明式事务管理引入了引人的替代选择后。


### 1.2 局部事务（Local Transactions）

局部事务是资源特定的，比如一个事务跟一个JDBC连接关联。局部事务可能更容易使用，但是有明显的缺点：它们不能跨多个事务资源使用。比如，一个使用JDBC 连接关联事务的代码无法在一个全局JTA事务内运行。因为应用服务端不包含在事务管理内，它不能保证跨多个资源事务的正确性。另外一个不好的地方是局部事务对编程模式有侵害。

### 1.3 Spring框架的一致性编程模型

Spring结局了全局和局部事务的缺点。让应用开发人员在任何环境中能够使用一个一致性的编程模型。一次编码，就可以从不同环境中的不通过事务管理的策略中受益。简单说就是一次编码，终身受益。Spring框架同时提供了声明式和编程式事务关联。大部分用户更倾向于使用声明式事务管理，这也是在大部分场景中推荐的。


使用编程式事务管理，开发人员可以与Spring框架事务抽象协同工作，这些抽象能跟运行于任何底层事务框架之上。使用更受青睐的声明模型，开发人员需要写一些或者不需要写於事务管理有关的代码，因此不需要依赖Spring框架的事务API或者任何事务API。
